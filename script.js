document.addEventListener("DOMContentLoaded", function () {
    // Déclaration pour utiliser PapaParse via CDN
    var _a;
    var ecoles = [];
    // Charger le fichier CSV au démarrage
    fetch("fr-esr-parcoursup.csv")
        .then(function (response) { return response.text(); })
        .then(function (text) {
        Papa.parse(text, {
            header: true,
            skipEmptyLines: true,
            complete: function (result) {
                ecoles = result.data;
                console.log("Données chargées :", ecoles);
                // Vérifier si les données ont bien un champ "Établissement"
                if (ecoles.length > 0) {
                    console.log("Premier élément chargé :", ecoles[0]);
                }
                else {
                    console.error("Aucune donnée chargée !");
                }
            }
        });
    });
    // Fonction de recherche
    function rechercherEcole() {
        var searchInput = document.getElementById("searchInput").value.toLowerCase();
        var resultDiv = document.getElementById("result");
        // Recherche dans la liste des écoles
        var ecoleTrouvee = ecoles.find(function (ecole) { return ecole["Établissement"] && ecole["Établissement"].toLowerCase().includes(searchInput); });
        if (ecoleTrouvee) {
            resultDiv.innerHTML = "\n            \n<h2 class=\"subtitle\">Informations g\u00E9n\u00E9rales</h2>\n<p><strong>Session:</strong> ".concat(ecoleTrouvee["Session"], "</p>\n<p><strong>Statut de l\u2019\u00E9tablissement:</strong> ").concat(ecoleTrouvee["Statut de l’établissement de la filière de formation (public, privé…)"], "</p>\n<p><strong>Code UAI:</strong> ").concat(ecoleTrouvee["Code UAI de l'établissement"], "</p>\n<p><strong>\u00C9tablissement:</strong> ").concat(ecoleTrouvee["Établissement"], "</p>\n<p><strong>Code d\u00E9partemental :</strong> ").concat(ecoleTrouvee["Code départemental de l’établissement"], "</p>\n<p><strong>D\u00E9partement:</strong> ").concat(ecoleTrouvee["Département de l’établissement"], "</p>\n<p><strong>R\u00E9gion:</strong> ").concat(ecoleTrouvee["Région de l’établissement"], "</p>\n<p><strong>Acad\u00E9mie:</strong> ").concat(ecoleTrouvee["Académie de l’établissement"], "</p>\n<p><strong>Commune:</strong> ").concat(ecoleTrouvee["Commune de l’établissement"], "</p>\n<p><strong>Coordonn\u00E9es GPS :</strong> ").concat(ecoleTrouvee["Coordonnées GPS de la formation"], "</p>\n\n<h2 class=\"subtitle\">Informations sur la formation</h2>\n<p><strong>Fili\u00E8re de formation:</strong> ").concat(ecoleTrouvee["Filière de formation"], "</p>\n<p><strong>S\u00E9lectivit\u00E9:</strong> ").concat(ecoleTrouvee["Sélectivité"], "</p>\n<p><strong>Fili\u00E8re tr\u00E8s agr\u00E9g\u00E9e:</strong> ").concat(ecoleTrouvee["Filière de formation très agrégée"], "</p>\n<p><strong>Fili\u00E8re d\u00E9taill\u00E9e:</strong> ").concat(ecoleTrouvee["Filière de formation détaillée"], "</p>\n<p><strong>Fili\u00E8re d\u00E9taill\u00E9e bis:</strong> ").concat(ecoleTrouvee["Filière de formation détaillée bis"], "</p>\n<p><strong>Fili\u00E8re tr\u00E8s d\u00E9taill\u00E9e:</strong> ").concat(ecoleTrouvee["Filière de formation très détaillée"], "</p>\n\n<h2 class=\"subtitle\">Capacit\u00E9 et candidats</h2>\n<p><strong>Capacit\u00E9 de l\u2019\u00E9tablissement:</strong> ").concat(ecoleTrouvee["Capacité de l’établissement par formation"], "</p>\n<p><strong>Candidats totaux:</strong> ").concat(ecoleTrouvee["Effectif total des candidats pour une formation"], "</p>\n<p><strong>Candidates totales:</strong> ").concat(ecoleTrouvee["Dont effectif des candidates pour une formation"], "</p>\n<p><strong>Candidats en phase principale:</strong> ").concat(ecoleTrouvee["Effectif total des candidats en phase principale"], "</p>\n<p><strong>Candidats en phase compl\u00E9mentaire:</strong> ").concat(ecoleTrouvee["Effectif total des candidats en phase complémentaire"], "</p>\n<p><strong>Candidats en internat:</strong> ").concat(ecoleTrouvee["Dont effectif des candidats ayant postulé en internat"], "</p>\n\n<h2 class=\"subtitle\">Classement et s\u00E9lection</h2>\n<p><strong>Rang du dernier appel\u00E9 (Autres candidats):</strong> ").concat(ecoleTrouvee["Rang du dernier appelé du groupe 1"], "</p>\n<p><strong>Rang du dernier appel\u00E9 (Bacheliers technologiques):</strong> ").concat(ecoleTrouvee["Rang du dernier appelé du groupe 2"], "</p>\n<p><strong>Rang du dernier appel\u00E9 (Bacheliers professionnels):</strong> ").concat(ecoleTrouvee["Rang du dernier appelé du groupe 3"], "</p>\n\n<h2 class=\"subtitle\">Statistiques sur les admis</h2>\n<p><strong>% Admis ayant re\u00E7u une proposition \u00E0 l\u2019ouverture:</strong> ").concat(ecoleTrouvee["% d’admis ayant reçu leur proposition d’admission à l'ouverture de la procédure principale"], "</p>\n<p><strong>% Admis avant le bac:</strong> ").concat(ecoleTrouvee["% d’admis ayant reçu leur proposition d’admission avant le baccalauréat"], "</p>\n<p><strong>% Admis avant la fin de la proc\u00E9dure:</strong> ").concat(ecoleTrouvee["% d’admis ayant reçu leur proposition d’admission avant la fin de la procédure principale"], "</p>\n<p><strong>% Filles parmi les admis:</strong> ").concat(ecoleTrouvee["% d’admis dont filles"], "</p>\n<p><strong>% Admis n\u00E9o bacheliers:</strong> ").concat(ecoleTrouvee["% d’admis néo bacheliers"], "</p>\n<p><strong>% Admis avec mention (BG):</strong> ").concat(ecoleTrouvee["Dont % d’admis avec mention (BG)"], "</p>\n<p><strong>% Admis avec mention (BT):</strong> ").concat(ecoleTrouvee["Dont % d’admis avec mention (BT)"], "</p>\n<p><strong>% Admis avec mention (BP):</strong> ").concat(ecoleTrouvee["Dont % d’admis avec mention (BP)"], "</p>\n<p><strong>Effectif des admis n\u00E9o bacheliers g\u00E9n\u00E9raux:</strong> ").concat(ecoleTrouvee["Effectif des admis néo bacheliers généraux"], "</p>\n<p><strong>Effectif des admis n\u00E9o bacheliers technologiques:</strong> ").concat(ecoleTrouvee["Effectif des admis néo bacheliers technologiques"], "</p>\n<p><strong>Effectif des admis n\u00E9o bacheliers professionnels:</strong> ").concat(ecoleTrouvee["Effectif des admis néo bacheliers professionnels"], "</p>\n\n<h2 class=\"subtitle\">Divers</h2>\n<p><strong>Taux d\u2019acc\u00E8s:</strong> ").concat(ecoleTrouvee["Taux d’accès"], "</p>\n<p><strong>Part des terminales g\u00E9n\u00E9rales en position d\u2019admission:</strong> ").concat(ecoleTrouvee["Part des terminales générales qui étaient en position de recevoir une proposition en phase principale"], "</p>\n<p><strong>Part des terminales technologiques en position d\u2019admission:</strong> ").concat(ecoleTrouvee["Part des terminales technologiques qui étaient en position de recevoir une proposition en phase principale"], "</p>\n<p><strong>Part des terminales professionnelles en position d\u2019admission:</strong> ").concat(ecoleTrouvee["Part des terminales professionnelles qui étaient en position de recevoir une proposition en phase principale"], "</p>\n<p><strong>Lien Parcoursup:</strong> <a href=\"").concat(ecoleTrouvee["Lien de la formation sur la plateforme Parcoursup"], "\" target=\"_blank\">Consulter sur Parcoursup</a></p>\n\n<h2 class=\"subtitle\">Informations suppl\u00E9mentaires</h2>\n<p><strong>Code \u00E9tablissement paysage:</strong> ").concat(ecoleTrouvee["etablissement_id_paysage"], "</p>\n<p><strong>Composante \u00E9tablissement paysage:</strong> ").concat(ecoleTrouvee["composante_id_paysage"], "</p>\n<p><strong>Concours communs et banque d'\u00E9preuves:</strong> ").concat(ecoleTrouvee["Concours communs et banque d'épreuves"], "</p>\n<p><strong>List_com:</strong> ").concat(ecoleTrouvee["list_com"], "</p>\n<p><strong>Tri:</strong> ").concat(ecoleTrouvee["tri"], "</p>\n<p><strong>Code affiliation formation:</strong> ").concat(ecoleTrouvee["cod_aff_form"], "</p>\n\n<h2 class=\"subtitle\">Groupes et r\u00E9partition</h2>\n<p><strong>Regroupement 1 effectu\u00E9:</strong> ").concat(ecoleTrouvee["Regroupement 1 effectué par les formations pour les classements"], "</p>\n<p><strong>Regroupement 2 effectu\u00E9:</strong> ").concat(ecoleTrouvee["Regroupement 2 effectué par les formations pour les classements"], "</p>\n<p><strong>Regroupement 3 effectu\u00E9:</strong> ").concat(ecoleTrouvee["Regroupement 3 effectué par les formations pour les classements"], "</p>\n\n<p><strong>Effectif des candidats en terminale g\u00E9n\u00E9rale ayant re\u00E7u une proposition d\u2019admission:</strong> ").concat(ecoleTrouvee["Effectif des candidats en terminale générale ayant reçu une proposition d’admission de la part de l’établissement"], "</p>\n<p><strong>Effectif des candidats en terminale technologique ayant re\u00E7u une proposition d\u2019admission:</strong> ").concat(ecoleTrouvee["Effectif des candidats en terminale technologique ayant reçu une proposition d’admission de la part de l’établissement"], "</p>\n<p><strong>Effectif des candidats en terminale professionnelle ayant re\u00E7u une proposition d\u2019admission:</strong> ").concat(ecoleTrouvee["Effectif des candidats en terminale professionnelle ayant reçu une proposition d’admission de la part de l’établissement"], "</p>\n<p><strong>Effectif des autres candidats ayant re\u00E7u une proposition d\u2019admission:</strong> ").concat(ecoleTrouvee["Effectif des autres candidats ayant reçu une proposition d’admission de la part de l’établissement"], "</p>");
        }
        else {
            resultDiv.innerHTML = "<p>Aucune école trouvée.</p>";
        }
    }
    // Ajouter un écouteur d'événement sur le bouton
    (_a = document.getElementById("searchButton")) === null || _a === void 0 ? void 0 : _a.addEventListener("click", rechercherEcole);
});
